!function(){var n=function(n){var e=n,o=!1;if(n.positions.length)for(i=0;i<n.positions.length;i++)"6103"===n.positions[i]&&0===n.status&&(o=!0);return o&&(e.positions=["6103"],e.status=1),e},e=function(n){var e=new Image,o="_img_"+Math.random();window[o]=e,e.onload=e.onerror=function(){window[o]=null},e.src=n},o={set:function(n,e,o){if("number"==typeof o.expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*o.expires),o.expires=i}return e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),n=n.replace(/[\(\)]/g,escape),document.cookie=[n,"=",e,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")},get:function(n){for(var e,o=document.cookie?document.cookie.split("; "):[],i=/(%[0-9A-Z]{2})+/g,t=0;t<o.length;t++){var a=o[t].split("="),r=a[0].replace(i,decodeURIComponent),c=a.slice(1).join("=");if('"'===c.charAt(0)&&(c=c.slice(1,-1)),c=c.replace(i,decodeURIComponent),n===r){e=c;break}n||(e[r]=c)}return e}},t={advertLoad:[]},a=function(i,a,r,c,d,p){var s=function(n){var e={client_id:r};i.ajax({url:"http://changyan.sohu.com/api/2/user/info",cache:!1,dataType:"jsonp",data:e,success:function(e){n(e)},error:function(){n()}})},u=function(n,o){var a="",o=o||0;window.changyan&&window.changyan.api&&"function"==typeof window.changyan.api.ready?window.changyan.api.ready(function(n){var e=n.getUUID();"string"==typeof e&&32===e.length&&(a=e)}):window.cyan&&window.cyan.api&&"function"==typeof window.cyan.api.ready&&window.cyan.api.ready(function(n){var e=n.getUUID();"string"==typeof e&&32===e.length&&(a=e)});var s=function(n,e,t,c,d,p,s,u,l,g,f){var y={appId:r,advertId:n,agencyType:e,pce:t,tag:c,ref:d,uuid:a,uid:o};void 0!==p&&(y.rtbAdId=p),void 0!==s&&(y.winNoticeUrl=s),void 0!==u&&(y.dspId=u),void 0!==l&&(y.type=l),void 0!==g&&(y.category=g),void 0!==f&&(y.isCookieMapping=f),i.ajax({url:"http://e.changyan.sohu.com/dataService/v2/pv",dataType:"jsonp",data:y})},u=function(n,e,i,t,c,d,p,s,u,l,g){var f={appId:r,advertId:n,agencyType:e,pce:i,tag:t,ref:c,category:l,uuid:a,uid:o};void 0!==d&&(f.rtbAdId=d),void 0!==p&&(f.dspId=p),void 0!==s&&(f.isCookieMapping=s),void 0!==u&&(f.type=u),void 0!==g&&(f.landingUrl=g);var y,w="http://e.changyan.sohu.com/dataService/v2/click?";for(y in f)w+=y+"="+window.encodeURIComponent(f[y])+"&";w.substring(0,w.length-1),window.open(w)},l={appId:r,category:c,title:d,url:p,position:n,uuid:a,uid:o,userAgent:window.navigator.userAgent};1607===l.position&&(l.isLeft=!0),1608===l.position&&(l.isLeft=!1,l.position=1607),i.ajax({url:"http://e.changyan.sohu.com/dataService/v2/getData",data:l,dataType:"jsonp",success:function(n){if(0===n.code){var o={};("RTB"===n.agencyType||"AGENCY"===n.agencyType)&&(o=i.parseJSON(n.advertContent),function(){o.exposure_urls instanceof window.Array&&i.each(o.exposure_urls,function(n,o){o.exposureUrl instanceof window.Array&&"number"==typeof o.timeMillis&&window.setTimeout(function(){i.each(o.exposureUrl,function(n,o){e(o)})},1e3*o.timeMillis)})}()),s(n.advertId,n.agencyType,n.pce,n.tag,n.ref,o.rtbAdId,o.winNoticeUrl,o.dspId,o.type,o.category,o.isCookieMapping),n.params=l,n.sendClickLog=function(){"RTB"===n.agencyType&&o.clickUrls&&o.clickUrls.length&&i.each(o.clickUrls,function(){}),u(n.advertId,n.agencyType,n.pce,n.tag,n.ref,o.rtbAdId,o.dspId,o.cookieMapping,o.type,o.category,o.landingUrl)};var a,r=t.advertLoad;for(a=0;a<r.length;a++)r[a](n)}}})},l=function(n){i.ajax({url:"http://e.changyan.sohu.com/dataService/getConfig",data:{appId:r},dataType:"jsonp",success:function(e){0===e.code&&"function"==typeof n&&n(e)}})};l(function(e){e=n(e);var i,t=!1;for(i=0;i<e.positions.length;i++)"6103"===e.positions[i]&&(t=!0);if(e&&1===e.status){if(e.disabledChannels&&e.disabledChannels.length){var r=!0;if(function(){var n;for(n=0;n<e.disabledChannels.length;n++)e.disabledChannels[n]===c&&(r=!1)}(),r===!1&&!t)return;r===!1&&t&&(e.positions=["6103"])}if(e.positions&&e.positions.length){var d=function(n){var o,i;for(o=0;o<e.positions.length;o++)i=parseInt(e.positions[o],10),"wap"===a&&5e3>i||"pc"===a&&i>5e3||("pc"!==a||1530!==i||document.getElementById("SOHUCS"))&&u(i,n)};"mark"===o.get("cy-mark")?s(function(n){var e;n&&n.user_id?e=n.user_id:o.set("cy-mark",null,{expires:-1,path:"/"}),d(e)}):(d(),window.setTimeout(function(){s(function(n){n&&n.user_id&&o.set("cy-mark","mark",{expires:30,path:"/"})})},5e3))}}})},r=function(n){if(window.XMLHttpRequest){var e=n.type,o=n.appId,i="null",t=window.document.title,r=window.location.href;"pc"!==e&&"wap"!==e&&(e="pc"),n.hasOwnProperty("categoryId")&&void 0!==n.categoryId&&(i=n.categoryId),n.hasOwnProperty("title")&&(t=n.title),n.hasOwnProperty("url")&&(r=n.url),a(window.changyanjQuery||window.cyanZepto||window.jQuery,e,o,i,t,r)}};r.on=function(n,e){t[n]&&"function"==typeof e&&t[n].push(e)},"function"!=typeof window.changyanDSP&&(window.changyanDSP=r)}();